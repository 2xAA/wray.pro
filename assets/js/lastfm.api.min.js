function LastFM(f){let h=f.apiKey||"",p=f.apiSecret||"",k=f.apiUrl||"https://ws.audioscrobbler.com/2.0/",g=f.cache||void 0;this.setApiKey=function(a){h=a};this.setApiSecret=function(a){p=a};this.setApiUrl=function(a){k=a};this.setCache=function(a){g=a};let m=0,r=function(a,b,d){if("POST"==d){d=document.getElementsByTagName("html")[0];const c=document.createElement("iframe");c.width=1;c.height=1;c.style.border="none";c.onload=function(){"undefined"!=typeof b.success&&b.success()};d.appendChild(c);d="undefined"!= typeof c.contentWindow?c.contentWindow.document:"undefined"!=typeof c.contentDocument.document?c.contentDocument.document.document:c.contentDocument.document;d.open();d.clear();d.write('<form method="post" action="'+k+'" id="form">');for(var e in a)d.write('<input type="text" name="'+e+'" value="'+a[e]+'">');d.write("</form>");d.write('<script type="application/x-javascript">');d.write('document.getElementById("form").submit();');d.write("\x3c/script>");d.close()}else{const f="jsonp"+(new Date).getTime()+ m;m+=1;const l=q.getApiSignature(a);if("undefined"!=typeof g&&g.contains(l)&&!g.isExpired(l))"undefined"!=typeof b.success&&b.success(g.load(l));else{a.callback=f;a.format="json";window[f]=function(d){if("undefined"!=typeof g){const c=g.getExpirationTime(a);0<c&&g.store(l,d,c)}"undefined"!=typeof d.error?"undefined"!=typeof b.error&&b.error(d.error,d.message):"undefined"!=typeof b.success&&b.success(d);window[f]=void 0;try{delete window[f]}catch(e){}h&&h.removeChild(n)};var h=document.getElementsByTagName("head")[0], n=document.createElement("script");d=[];for(e in a)d.push(encodeURIComponent(e)+"="+encodeURIComponent(a[e]));n.src=k+"?"+d.join("&").replace(/%20/g,"+");h.appendChild(n)}}},c=function(a,b,d,c){b=b||{};d=d||{};b.method=a;b.api_key=h;r(b,d,c||"GET")},e=function(a,b,d,c,e){b=b||{};c=c||{};e=e||"GET";b.method=a;b.api_key=h;d&&"undefined"!=typeof d.key&&(b.sk=d.key);b.api_sig=q.getApiSignature(b);r(b,c,e)};this.album={addTags:function(a,b,d){"object"==typeof a.tags&&(a.tags=a.tags.join(","));e("album.addTags", a,b,d,"POST")},getBuylinks:function(a,b){c("album.getBuylinks",a,b)},getInfo:function(a,b){c("album.getInfo",a,b)},getTags:function(a,b,d){e("album.getTags",a,b,d)},removeTag:function(a,b,d){e("album.removeTag",a,b,d,"POST")},search:function(a,b){c("album.search",a,b)},share:function(a,b,d){"object"==typeof a.recipient&&(a.recipient=a.recipient.join(","));e("album.share",a,d)}};this.artist={addTags:function(a,b,d){"object"==typeof a.tags&&(a.tags=a.tags.join(","));e("artist.addTags",a,b,d,"POST")}, getCorrection:function(a,b){c("artist.getCorrection",a,b)},getEvents:function(a,b){c("artist.getEvents",a,b)},getImages:function(a,b){c("artist.getImages",a,b)},getInfo:function(a,b){c("artist.getInfo",a,b)},getPastEvents:function(a,b){c("artist.getPastEvents",a,b)},getPodcast:function(a,b){c("artist.getPodcast",a,b)},getShouts:function(a,b){c("artist.getShouts",a,b)},getSimilar:function(a,b){c("artist.getSimilar",a,b)},getTags:function(a,b,d){e("artist.getTags",a,b,d)},getTopAlbums:function(a,b){c("artist.getTopAlbums", a,b)},getTopFans:function(a,b){c("artist.getTopFans",a,b)},getTopTags:function(a,b){c("artist.getTopTags",a,b)},getTopTracks:function(a,b){c("artist.getTopTracks",a,b)},removeTag:function(a,b,d){e("artist.removeTag",a,b,d,"POST")},search:function(a,b){c("artist.search",a,b)},share:function(a,b,d){"object"==typeof a.recipient&&(a.recipient=a.recipient.join(","));e("artist.share",a,b,d,"POST")},shout:function(a,b,d){e("artist.shout",a,b,d,"POST")}};this.auth={getMobileSession:function(a,b){a={username:a.username, authToken:md5(a.username+md5(a.password))};e("auth.getMobileSession",a,null,b)},getSession:function(a,b){e("auth.getSession",a,null,b)},getToken:function(a){e("auth.getToken",null,null,a)},getWebSession:function(a){const b=k;k="http://ext.last.fm/2.0/";e("auth.getWebSession",null,null,a);k=b}};this.chart={getHypedArtists:function(a,b,d){c("chart.getHypedArtists",a,d)},getHypedTracks:function(a,b,d){c("chart.getHypedTracks",a,d)},getLovedTracks:function(a,b,d){c("chart.getLovedTracks",a,d)},getTopArtists:function(a, b,d){c("chart.getTopArtists",a,d)},getTopTags:function(a,b,d){c("chart.getTopTags",a,d)},getTopTracks:function(a,b,d){c("chart.getTopTracks",a,d)}};this.event={attend:function(a,b,d){e("event.attend",a,b,d,"POST")},getAttendees:function(a,b,d){c("event.getAttendees",a,d)},getInfo:function(a,b){c("event.getInfo",a,b)},getShouts:function(a,b){c("event.getShouts",a,b)},share:function(a,b,d){"object"==typeof a.recipient&&(a.recipient=a.recipient.join(","));e("event.share",a,b,d,"POST")},shout:function(a, b,d){e("event.shout",a,b,d,"POST")}};this.geo={getEvents:function(a,b){c("geo.getEvents",a,b)},getMetroArtistChart:function(a,b){c("geo.getMetroArtistChart",a,b)},getMetroHypeArtistChart:function(a,b){c("geo.getMetroHypeArtistChart",a,b)},getMetroHypeTrackChart:function(a,b){c("geo.getMetroHypeTrackChart",a,b)},getMetroTrackChart:function(a,b){c("geo.getMetroTrackChart",a,b)},getMetroUniqueArtistChart:function(a,b){c("geo.getMetroUniqueArtistChart",a,b)},getMetroUniqueTrackChart:function(a,b){c("geo.getMetroUniqueTrackChart", a,b)},getMetroWeeklyChartlist:function(a,b){c("geo.getMetroWeeklyChartlist",a,b)},getMetros:function(a,b){c("geo.getMetros",a,b)},getTopArtists:function(a,b){c("geo.getTopArtists",a,b)},getTopTracks:function(a,b){c("geo.getTopTracks",a,b)}};this.group={getHype:function(a,b){c("group.getHype",a,b)},getMembers:function(a,b){c("group.getMembers",a,b)},getWeeklyAlbumChart:function(a,b){c("group.getWeeklyAlbumChart",a,b)},getWeeklyArtistChart:function(a,b){c("group.getWeeklyArtistChart",a,b)},getWeeklyChartList:function(a, b){c("group.getWeeklyChartList",a,b)},getWeeklyTrackChart:function(a,b){c("group.getWeeklyTrackChart",a,b)}};this.library={addAlbum:function(a,b,d){e("library.addAlbum",a,b,d,"POST")},addArtist:function(a,b,d){e("library.addArtist",a,b,d,"POST")},addTrack:function(a,b,d){e("library.addTrack",a,b,d,"POST")},getAlbums:function(a,b){c("library.getAlbums",a,b)},getArtists:function(a,b){c("library.getArtists",a,b)},getTracks:function(a,b){c("library.getTracks",a,b)}};this.playlist={addTrack:function(a, b,d){e("playlist.addTrack",a,b,d,"POST")},create:function(a,b,d){e("playlist.create",a,b,d,"POST")},fetch:function(a,b){c("playlist.fetch",a,b)}};this.radio={getPlaylist:function(a,b,d){e("radio.getPlaylist",a,b,d)},search:function(a,b,d){e("radio.search",a,b,d)},tune:function(a,b,d){e("radio.tune",a,b,d)}};this.tag={getInfo:function(a,b){c("tag.getInfo",a,b)},getSimilar:function(a,b){c("tag.getSimilar",a,b)},getTopAlbums:function(a,b){c("tag.getTopAlbums",a,b)},getTopArtists:function(a,b){c("tag.getTopArtists", a,b)},getTopTags:function(a){c("tag.getTopTags",null,a)},getTopTracks:function(a,b){c("tag.getTopTracks",a,b)},getWeeklyArtistChart:function(a,b){c("tag.getWeeklyArtistChart",a,b)},getWeeklyChartList:function(a,b){c("tag.getWeeklyChartList",a,b)},search:function(a,b){c("tag.search",a,b)}};this.tasteometer={compare:function(a,b){c("tasteometer.compare",a,b)},compareGroup:function(a,b){c("tasteometer.compareGroup",a,b)}};this.track={addTags:function(a,b,d){e("track.addTags",a,b,d,"POST")},ban:function(a, b,d){e("track.ban",a,b,d,"POST")},getBuylinks:function(a,b){c("track.getBuylinks",a,b)},getCorrection:function(a,b){c("track.getCorrection",a,b)},getFingerprintMetadata:function(a,b){c("track.getFingerprintMetadata",a,b)},getInfo:function(a,b){c("track.getInfo",a,b)},getShouts:function(a,b){c("track.getShouts",a,b)},getSimilar:function(a,b){c("track.getSimilar",a,b)},getTags:function(a,b,d){e("track.getTags",a,b,d)},getTopFans:function(a,b){c("track.getTopFans",a,b)},getTopTags:function(a,b){c("track.getTopTags", a,b)},love:function(a,b,d){e("track.love",a,b,d,"POST")},removeTag:function(a,b,d){e("track.removeTag",a,b,d,"POST")},scrobble:function(a,b,d){if(-1!=a.constructor.toString().indexOf("Array")){const c={};for(i in a)for(j in a[i])c[j+"["+i+"]"]=a[i][j];a=c}e("track.scrobble",a,b,d,"POST")},search:function(a,b){c("track.search",a,b)},share:function(a,b,d){"object"==typeof a.recipient&&(a.recipient=a.recipient.join(","));e("track.share",a,b,d,"POST")},unban:function(a,b,d){e("track.unban",a,b,d,"POST")}, unlove:function(a,b,d){e("track.unlove",a,b,d,"POST")},updateNowPlaying:function(a,b,d){e("track.updateNowPlaying",a,b,d,"POST")}};this.user={getArtistTracks:function(a,b){c("user.getArtistTracks",a,b)},getBannedTracks:function(a,b){c("user.getBannedTracks",a,b)},getEvents:function(a,b){c("user.getEvents",a,b)},getFriends:function(a,b){c("user.getFriends",a,b)},getInfo:function(a,b){c("user.getInfo",a,b)},getLovedTracks:function(a,b){c("user.getLovedTracks",a,b)},getNeighbours:function(a,b){c("user.getNeighbours", a,b)},getNewReleases:function(a,b){c("user.getNewReleases",a,b)},getPastEvents:function(a,b){c("user.getPastEvents",a,b)},getPersonalTracks:function(a,b){c("user.getPersonalTracks",a,b)},getPlaylists:function(a,b){c("user.getPlaylists",a,b)},getRecentStations:function(a,b,d){e("user.getRecentStations",a,b,d)},getRecentTracks:function(a,b){c("user.getRecentTracks",a,b)},getRecommendedArtists:function(a,b,d){e("user.getRecommendedArtists",a,b,d)},getRecommendedEvents:function(a,b,d){e("user.getRecommendedEvents", a,b,d)},getShouts:function(a,b){c("user.getShouts",a,b)},getTopAlbums:function(a,b){c("user.getTopAlbums",a,b)},getTopArtists:function(a,b){c("user.getTopArtists",a,b)},getTopTags:function(a,b){c("user.getTopTags",a,b)},getTopTracks:function(a,b){c("user.getTopTracks",a,b)},getWeeklyAlbumChart:function(a,b){c("user.getWeeklyAlbumChart",a,b)},getWeeklyArtistChart:function(a,b){c("user.getWeeklyArtistChart",a,b)},getWeeklyChartList:function(a,b){c("user.getWeeklyChartList",a,b)},getWeeklyTrackChart:function(a, b){c("user.getWeeklyTrackChart",a,b)},shout:function(a,b,d){e("user.shout",a,b,d,"POST")}};this.venue={getEvents:function(a,b){c("venue.getEvents",a,b)},getPastEvents:function(a,b){c("venue.getPastEvents",a,b)},search:function(a,b){c("venue.search",a,b)}};var q={getApiSignature:function(a){let b=[],d="",c;for(c in a)b.push(c);b.sort();for(const e in b)c=b[e],d+=c+a[c];d+=p;return md5(d)}}};